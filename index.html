<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intrusion Tests â€” CEHâ€‘Aligned Weekly Plan & Mapping</title>
  <style>
    :root{
      --bg: #f7f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280; --brand:#2563eb; --accent:#10b981; --danger:#ef4444; --ring:#93c5fd; --border:#e5e7eb;
      --badge:#eef2ff; --badge-text:#3730a3; --mark:#fff3bf;
    }
    [data-theme="dark"]{--bg:#0b1020; --card:#0f172a; --text:#e5e7eb; --muted:#9ca3af; --brand:#60a5fa; --accent:#34d399; --danger:#f87171; --ring:#1d4ed8; --border:#1f2937; --badge:#111827; --badge-text:#c7d2fe; --mark:#2f2a11;}
    html,body{height:100%}
    body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--text);}
    .container{max-width:1100px; margin:0 auto; padding:24px;}
    header{position:sticky; top:0; z-index:10; background:linear-gradient(to bottom, var(--bg) 70%, #0000); backdrop-filter:saturate(1.1) blur(4px); border-bottom:1px solid var(--border);}
    header .inner{display:flex; gap:20px; align-items:center; justify-content:space-between; padding:12px 24px; max-width:1100px; margin:0 auto;}
    .title{display:flex; flex-direction:column; gap:2px}
    .title h1{margin:0; font-size: clamp(1.2rem, 2.4vw, 1.8rem); letter-spacing:.2px}
    .title p{margin:0; color:var(--muted); font-size:.95rem}

    .toolbar{display:flex; flex-wrap:wrap; align-items:center; gap:8px}
    .toolbar > *{border:1px solid var(--border); background:var(--card); color:var(--text); padding:8px 10px; border-radius:10px; font-size:.9rem}
    .toolbar .search{display:flex; align-items:center; gap:8px}
    .toolbar input[type="search"]{border:none; outline:none; background:transparent; width:220px; color:inherit}
    .btn{cursor:pointer; transition:transform .06s ease}
    .btn:active{transform:translateY(1px)}

    .filters{display:flex; gap:12px; flex-wrap:wrap; margin:14px 0 0}
    .chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:var(--card); cursor:pointer; user-select:none;}
    .chip input{accent-color:var(--brand)}
    .select{display:flex; align-items:center; gap:8px}
    .select input{width:200px}

    .view-toggle{display:flex; gap:6px}

    .cards{display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:14px; margin-top:18px}
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 2px rgba(0,0,0,.06); overflow:hidden}
    .card summary{list-style:none; cursor:pointer; padding:14px 16px; font-weight:600; display:flex; align-items:center; justify-content:space-between}
    .card summary::-webkit-details-marker{display:none}
    .summary-left{display:flex; align-items:center; gap:10px}
    .wk{display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius:10px; background:var(--badge); color:var(--badge-text); font-weight:700}
    .badges{display:flex; gap:6px; flex-wrap:wrap}
    .badge{font-size:.72rem; padding:4px 8px; background:var(--badge); color:var(--badge-text); border-radius:999px; border:1px dashed var(--border)}
    .card .body{padding:0 16px 14px}
    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    @media(min-width:760px){.grid{grid-template-columns:1fr 1fr}}
    .pane{border:1px solid var(--border); border-radius:12px; padding:12px; background:linear-gradient(180deg, rgba(0,0,0,0) 0, rgba(0,0,0,.02) 100%)}
    .pane h4{margin:0 0 8px; font-size:1rem}
    .pane ul{margin:0; padding-left:18px}
    .pane li{margin:.3rem 0}
    .pane .copy{margin-top:10px}

    .kicker{margin-top:26px; display:grid; gap:14px}
    .kicker .section{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:16px}
    .section h3{margin-top:0}
    .note{color:var(--muted)}

    mark{background:var(--mark); padding:0 2px; border-radius:3px}

    .table-view{display:none; margin-top:16px}
    table{width:100%; border-collapse:separate; border-spacing:0 8px}
    th, td{padding:10px 12px; text-align:left}
    th{color:var(--muted); font-weight:600; font-size:.9rem}
    tbody tr{background:var(--card); border:1px solid var(--border)}
    tbody tr td:first-child{border-top-left-radius:10px; border-bottom-left-radius:10px}
    tbody tr td:last-child{border-top-right-radius:10px; border-bottom-right-radius:10px}

    .footer{display:flex; flex-wrap:wrap; gap:8px; margin:16px 0 40px}

    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
</head>
<body>
  <header>
    <div class="inner">
      <div class="title">
        <h1>Intrusion Tests â€” CEHâ€‘Aligned Weekly Plan & Mapping</h1>
        <p>Competency: <strong>EZ06</strong> â€¢ Outcomeâ€‘driven â€¢ Class 2 labs implement Class 1 theory</p>
      </div>
      <div class="toolbar">
        <label class="search" title="Search in theory & labs">
          <span aria-hidden="true">ðŸ”Ž</span>
          <input id="q" type="search" placeholder="Search (e.g., SQLi, OpenVAS, Kerberoasting)" />
        </label>
        <button class="btn" id="expandAll" title="Expand all">Expand all</button>
        <button class="btn" id="collapseAll" title="Collapse all">Collapse all</button>
        <div class="view-toggle" role="group" aria-label="View mode">
          <button class="btn" id="cardsView" aria-pressed="true">Cards</button>
          <button class="btn" id="tableView">Table</button>
        </div>
        <button class="btn" id="printBtn" title="Print / Save as PDF">Print</button>
        <button class="btn" id="themeBtn" title="Toggle theme">ðŸŒ™</button>
      </div>
    </div>
    <div class="inner" style="padding-top:0;">
      <div class="filters" role="group" aria-label="Filters">
        <label class="chip"><input type="checkbox" class="f-outcome" value="Plan"> <span>Plan</span></label>
        <label class="chip"><input type="checkbox" class="f-outcome" value="Recon"> <span>Recon</span></label>
        <label class="chip"><input type="checkbox" class="f-outcome" value="Vuln"> <span>Vuln</span></label>
        <label class="chip"><input type="checkbox" class="f-outcome" value="Report"> <span>Report</span></label>
        <span class="select">
          <label for="ceh" class="sr-only">CEH Modules</label>
          <span>CEH:</span>
          <input id="ceh" type="text" placeholder="e.g. 1, 4, 8-9" title="Filter by CEH module numbers (comma / dash)" />
        </span>
        <span class="select">
          <label for="jump" class="sr-only">Jump to week</label>
          <span>Jump:</span>
          <select id="jump"></select>
        </span>
        <button class="btn" id="resetFilters" title="Reset filters">Reset</button>
        <button class="btn" id="exportCsv" title="Export visible weeks to CSV">Export CSV</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Cards View -->
    <section id="cards" class="cards" aria-live="polite"></section>

    <!-- Table View -->
    <section id="table" class="table-view" aria-live="polite">
      <table aria-describedby="tableHelp">
        <thead>
          <tr><th>Week</th><th>CEH</th><th>Outcomes</th><th>Theory (Class 1)</th><th>Lab (Class 2)</th></tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
      <p id="tableHelp" class="note">Table shows current filters. Use the buttons above to switch back to Card view.</p>
    </section>

    <section class="kicker">
      <div class="section">
        <h3>Assessment & Outcomes</h3>
        <p><strong>Assessment (â‰¥60% to pass):</strong> Labs, case studies, group discussions, handsâ€‘on projects, simulations & incidentâ€‘response drills, <em>Midterm Practical</em> (Week 7), <em>Final Practical + Report</em> (Week 12).</p>
        <p><strong>Learning Outcomes:</strong> Plan penetration tests â€¢ Conduct reconnaissance â€¢ Test & validate vulnerabilities â€¢ Produce professional, actionable reports.</p>
      </div>
      <div class="section">
        <h3>Notes & Safety</h3>
        <ul>
          <li>All testing occurs in an <strong>isolated lab</strong> with explicit Rules of Engagement (RoE) and instructor approval.</li>
          <li>Follow campus policy & law; no testing on unauthorized systems. Maintain OPSEC & evidence hygiene.</li>
          <li>Lab tools include: nmap/NSE, OpenVAS or Nessus, Metasploit, LinPEAS/WinPEAS, Wireshark, bettercap/ettercap, Burp Suite, sqlmap, Impacket, BloodHound, Snort/Security Onion.</li>
        </ul>
      </div>
    </section>

    <div class="footer">
      <span class="note">Tip: Use <strong>Export CSV</strong> for a filtered plan, and <strong>Print</strong> to save a PDF.</span>
    </div>
  </main>

  <template id="cardTemplate">
    <details class="card" data-week="" data-ceh="" data-outcomes="">
      <summary>
        <div class="summary-left">
          <span class="wk">W<span class="wkn"></span></span>
          <span class="title"></span>
        </div>
        <div class="badges"></div>
      </summary>
      <div class="body">
        <div class="grid">
          <div class="pane">
            <h4>Class 1 â€” Theory</h4>
            <ul class="theory-list"></ul>
          </div>
          <div class="pane">
            <h4>Class 2 â€” Lab</h4>
            <ul class="lab-list"></ul>
            <button class="btn copy" data-role="copyLab">Copy lab checklist</button>
          </div>
        </div>
      </div>
    </details>
  </template>

  <script>
    // ---- Data (derived from the course canvas) ----
    const WEEKS = [
      {week:1, ceh:[1], outcomes:['Plan','Report'], title:'Intro, Ethics, RoE, Methodologies',
        theory:['Course intro; ethics & law; Rules of Engagement (RoE) & scoping', 'PTES & CEH phases', 'Lab safety & tooling overview', 'CEH v12: Module 01 overview'],
        lab:['Set up isolated lab (Kali/Parrot, Windows, Metasploitable, DVWA/Juice Shop)', 'Create project RoE & test plan', 'Validate snapshots & network segmentation']},
      {week:2, ceh:[1], outcomes:['Recon','Plan'], title:'Footprinting & OSINT',
        theory:['Passive recon: DNS/WHOIS, subdomains, breach data, metadata', 'Attack surface mapping & threat modeling', 'CEH v12: Module 01'],
        lab:['Passive recon on mock domain: whois, dig/nslookup, theHarvester, Amass', 'Use Shodan & Maltego (safe targets)', 'Submit OSINT findings map']},
      {week:3, ceh:[2,3], outcomes:['Recon'], title:'Scanning & Enumeration',
        theory:['Active recon: TCP/UDP scans, service/version detection', 'SMB/LDAP/SNMP enumeration', 'Scan hygiene & noise control', 'CEH v12: Modules 02â€“03'],
        lab:['nmap SYN/UDP with NSE scripts', 'enum4linux / ldapsearch / snmpwalk on lab hosts', 'Capture results & footprint minimization notes']},
      {week:4, ceh:[4], outcomes:['Vuln','Plan'], title:'Vulnerability Analysis',
        theory:['Scanners (OpenVAS/Nessus) & CVSS scoring', 'False positives & prioritization', 'Exploit chains & remediation thinking', 'CEH v12: Module 04'],
        lab:['Run OpenVAS/Nessus against lab targets', 'Triage top 5 vulns; map to MITRE ATT&CK', 'Propose exploit path & compensating controls']},
      {week:5, ceh:[5], outcomes:['Vuln'], title:'System Hacking & Privilege Escalation',
        theory:['Credentials: hashes & cracking', 'Linux/Windows local privilege escalation', 'Persistence & cleanup; OPSEC', 'CEH v12: Module 05'],
        lab:['Exploit a known vuln with Metasploit', 'Use LinPEAS/WinPEAS for escalation paths', 'Add & remove basic persistence; document evidence']},
      {week:6, ceh:[6,7], outcomes:['Vuln','Report'], title:'Sniffing, MITM & PCAP Analysis',
        theory:['Sniffing & MITM; ARP spoofing', 'PCAP analysis; malware basics & safety', 'Endpoint/EDR overview', 'CEH v12: Modules 06â€“07 (selected)'],
        lab:['Wireshark capture & filter crafting', 'Isolated ARP spoof vs DVWA login (bettercap/ettercap)', 'Analyze captured creds; propose mitigations']},
      {week:7, ceh:['multi'], outcomes:['Plan','Recon','Vuln','Report'], title:'Midterm Practical Exam',
        theory:['Midterm briefing & exam scope', 'Rubric expectations', 'Timeboxed engagement workflow'],
        lab:['Midterm Practical: plan â†’ recon â†’ exploitation chain on provided target', 'Submit short-form report (TTPs, evidence, mitigations)']},
      {week:8, ceh:[13,14,15], outcomes:['Vuln','Report'], title:'Web Apps, APIs & OWASP',
        theory:['Web apps & APIs; OWASP Top 10 (SQLi, XSS, IDOR, auth issues)', 'Burp Suite basics; input validation', 'SSRF overview', 'CEH v12: Modules 13â€“15 (selected)'],
        lab:['DVWA & Juice Shop: manual SQLi and sqlmap', 'Reflected/stored XSS; IDOR', 'Record requests in Burp; document impact & fixes']},
      {week:9, ceh:[8,9], outcomes:['Vuln'], title:'Active Directory & Lateral Movement',
        theory:['Kerberos basics; ASâ€‘REP/Kerberoasting', 'Passâ€‘theâ€‘Hash/overâ€‘PTH', 'Graphing attack paths', 'CEH v12: Modules 08â€“09 (selected)'],
        lab:['Miniâ€‘AD lab: BloodHound ingestion', 'Impacket tools for auth abuse (safe accounts)', 'Demonstrate constrained delegation path (simulated)']},
      {week:10, ceh:[10,11], outcomes:['Vuln','Report'], title:'Evasion, Tunneling & IDS/Firewall',
        theory:['IDS/Firewall evasion & tunneling', 'Service misdirection', 'DoS concepts & ethics', 'Log/alert triage', 'CEH v12: Modules 10â€“11'],
        lab:['nmap evasion (decoys/fragmentation/timing)', 'proxychains; basic Snort/SO rules & bypass attempts', 'Controlled hping3 rate test; analyze logs']},
      {week:11, ceh:[12], outcomes:['Plan','Report'], title:'Social Engineering & Awareness',
        theory:['Social engineering foundations', 'Phishing/smishing; payload delivery risks', 'Policy & legal boundaries', 'Defenseâ€‘inâ€‘depth', 'CEH v12: Module 12'],
        lab:['Design a phishing simulation plan (no external targets)', 'Craft templates & lures', 'Awareness recommendations & measurable KPIs']},
      {week:12, ceh:['integrative'], outcomes:['Report','Vuln'], title:'Reporting, Risk & Final Assessment',
        theory:['Reporting & communication: executive summary; risk ratings; remediation roadmap', 'Evidence handling', 'Final exam briefing'],
        lab:['Final Practical: full miniâ€‘engagement on new target', 'Produce professional report & brief verbal defense']},
    ];

    // ---- Utilities ----
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function setTheme(mode){
      document.documentElement.setAttribute('data-theme', mode);
      localStorage.setItem('theme', mode);
      $('#themeBtn').textContent = mode === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
    }

    function hydrateJump(){
      const j = $('#jump');
      j.innerHTML = WEEKS.map(w => `<option value="${w.week}">Week ${w.week}: ${w.title}</option>`).join('');
      j.addEventListener('change', e => {
        const w = parseInt(e.target.value, 10);
        const el = document.querySelector(`[data-week="${w}"]`);
        if(el){ el.open = true; el.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    }

    function cehTag(ceh){
      if(ceh.includes('multi')) return 'Multi';
      if(ceh.includes('integrative')) return 'Integrative';
      return ceh.join(', ');
    }

    function badge(text){
      const span = document.createElement('span');
      span.className = 'badge';
      span.textContent = text;
      return span;
    }

    function li(txt){ const li = document.createElement('li'); li.textContent = txt; return li; }

    function renderCards(){
      const wrap = $('#cards');
      wrap.innerHTML = '';
      const tpl = $('#cardTemplate');
      WEEKS.forEach(w => {
        const node = tpl.content.firstElementChild.cloneNode(true);
        node.dataset.week = w.week;
        node.dataset.ceh = (w.ceh||[]).join(',');
        node.dataset.outcomes = (w.outcomes||[]).join(',');
        node.querySelector('.wkn').textContent = w.week;
        node.querySelector('.title').textContent = w.title;
        const bwrap = node.querySelector('.badges');
        bwrap.append(badge('CEH: '+cehTag(w.ceh)));
        w.outcomes.forEach(o => bwrap.append(badge(o)));
        const tlist = node.querySelector('.theory-list');
        w.theory.forEach(t => tlist.append(li(t)));
        const llist = node.querySelector('.lab-list');
        w.lab.forEach(l => llist.append(li(l)));
        wrap.append(node);
      });
    }

    function renderTable(){
      const tbody = $('#tbody');
      tbody.innerHTML = '';
      WEEKS.forEach(w => {
        const tr = document.createElement('tr');
        tr.dataset.week = w.week;
        tr.dataset.ceh = (w.ceh||[]).join(',');
        tr.dataset.outcomes = (w.outcomes||[]).join(',');
        tr.innerHTML = `<td>Week ${w.week}</td><td>${cehTag(w.ceh)}</td><td>${w.outcomes.join(', ')}</td><td>${w.theory.join('; ')}</td><td>${w.lab.join('; ')}</td>`;
        tbody.append(tr);
      });
    }

    function toggleView(mode){
      const cards = $('#cards');
      const table = $('#table');
      if(mode==='cards'){ cards.style.display='grid'; table.style.display='none'; $('#cardsView').setAttribute('aria-pressed','true'); $('#tableView').setAttribute('aria-pressed','false'); }
      else { cards.style.display='none'; table.style.display='block'; $('#cardsView').setAttribute('aria-pressed','false'); $('#tableView').setAttribute('aria-pressed','true'); }
    }

    function expandAll(open=true){ $$('.card').forEach(d => d.open = open); }

    function parseCehQuery(q){
      // Supports comma & dash ranges e.g. "1,4,8-9"
      const set = new Set();
      q.split(',').map(s=>s.trim()).filter(Boolean).forEach(tok => {
        if(/^-?\d+\s*-\s*\d+$/.test(tok)){
          let [a,b] = tok.split('-').map(x=>parseInt(x.trim(),10));
          if(!isNaN(a)&&!isNaN(b)) for(let i=Math.min(a,b); i<=Math.max(a,b); i++) set.add(String(i));
        } else if(/\d+/.test(tok)) set.add(String(parseInt(tok,10)));
        else if(/integrative/i.test(tok)) set.add('integrative');
        else if(/multi/i.test(tok)) set.add('multi');
      });
      return set;
    }

    function highlight(el, query){
      // naive highlighter for text nodes inside lists
      const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null);
      const texts = []; let node;
      while((node = walker.nextNode())) texts.push(node);
      texts.forEach(t => {
        const parent = t.parentNode;
        if(!t.nodeValue) return;
        const val = t.nodeValue;
        if(!query){ parent.normalize(); return; }
        const idx = val.toLowerCase().indexOf(query);
        if(idx!==-1){
          const before = val.slice(0, idx);
          const match = val.slice(idx, idx+query.length);
          const after = val.slice(idx+query.length);
          const frag = document.createDocumentFragment();
          if(before) frag.append(document.createTextNode(before));
          const mark = document.createElement('mark'); mark.textContent = match; frag.append(mark);
          if(after) frag.append(document.createTextNode(after));
          parent.replaceChild(frag, t);
        }
      });
    }

    function clearHighlights(){ $$('.card .body').forEach(b => b.querySelectorAll('mark').forEach(m => m.replaceWith(m.textContent))); }

    function applyFilters(){
      const q = $('#q').value.trim().toLowerCase();
      const selectedOutcomes = $$('.f-outcome:checked').map(i=>i.value);
      const cehQuery = $('#ceh').value.trim();
      const cehSet = cehQuery ? parseCehQuery(cehQuery) : null;

      // Cards
      $$('.card').forEach(card => {
        const outcomes = card.dataset.outcomes.split(',').filter(Boolean);
        const ceh = card.dataset.ceh.split(',').filter(Boolean);
        let pass = true;
        if(selectedOutcomes.length){ pass = outcomes.some(o => selectedOutcomes.includes(o)); }
        if(pass && cehSet){ pass = ceh.some(c => cehSet.has(c)); }
        if(pass && q){
          const text = card.textContent.toLowerCase();
          pass = text.includes(q);
        }
        card.style.display = pass ? '' : 'none';
      });

      // Table rows
      $$('#tbody tr').forEach(tr => {
        const outcomes = tr.dataset.outcomes.split(',').filter(Boolean);
        const ceh = tr.dataset.ceh.split(',').filter(Boolean);
        let pass = true;
        if(selectedOutcomes.length){ pass = outcomes.some(o => selectedOutcomes.includes(o)); }
        if(pass && cehSet){ pass = ceh.some(c => cehSet.has(c)); }
        if(pass && q){ pass = tr.textContent.toLowerCase().includes(q); }
        tr.style.display = pass ? '' : 'none';
      });

      // Search highlight
      clearHighlights();
      if(q){ $$('.card .body').forEach(b => highlight(b, q)); }
    }

    function copyLab(btn){
      const ul = btn.closest('.pane').querySelector('.lab-list');
      const text = Array.from(ul.querySelectorAll('li')).map(li=>`â€¢ ${li.textContent}`).join('\n');
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(()=> btn.textContent = 'Copy lab checklist', 1200);
      });
    }

    function exportVisibleCsv(){
      const rows = [['Week','CEH','Outcomes','Theory','Lab']];
      $$('#tbody tr').forEach(tr => {
        if(tr.style.display==='none') return;
        const tds = tr.querySelectorAll('td');
        rows.push(Array.from(tds).map(td=> '"'+td.textContent.replaceAll('"','""')+'"'));
      });
      if(rows.length===1){ alert('No visible rows to export. Adjust filters.'); return; }
      const csv = rows.map(r=>r.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'Intrusion_Tests_Plan.csv';
      a.click();
      setTimeout(()=>URL.revokeObjectURL(a.href), 2000);
    }

    // ---- Event wiring ----
    document.addEventListener('click', e => {
      if(e.target.matches('[data-role="copyLab"]')) copyLab(e.target);
    });

    $('#q').addEventListener('input', applyFilters);
    $$('.f-outcome').forEach(cb => cb.addEventListener('change', applyFilters));
    $('#ceh').addEventListener('input', applyFilters);
    $('#resetFilters').addEventListener('click', () => {
      $('#q').value=''; $('#ceh').value=''; $$('.f-outcome').forEach(cb=>cb.checked=false); applyFilters();
    });

    $('#expandAll').addEventListener('click', () => expandAll(true));
    $('#collapseAll').addEventListener('click', () => expandAll(false));
    $('#cardsView').addEventListener('click', () => toggleView('cards'));
    $('#tableView').addEventListener('click', () => toggleView('table'));
    $('#printBtn').addEventListener('click', () => window.print());
    $('#themeBtn').addEventListener('click', () => setTheme(document.documentElement.getAttribute('data-theme')==='dark' ? 'light' : 'dark'));
    $('#exportCsv').addEventListener('click', exportVisibleCsv);

    // ---- Init ----
    (function init(){
      const saved = localStorage.getItem('theme');
      setTheme(saved || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
      renderCards();
      renderTable();
      hydrateJump();
      applyFilters();
    })();
  </script>
</body>
</html>


